<?php
 if ( ! defined( 'ABSPATH' ) ) { exit; } if ( isset( $_POST['wpc_settings'] ) ) { $settings = $_POST['wpc_settings']; do_action( 'wp_client_settings_update', $settings, 'limit_ips' ); $this->redirect( $this->settings()->get_current_setting_url() . '&msg=u' ); } $wpc_limit_ips = $this->cc_get_settings( 'limit_ips' ); $section_fields = array( array( 'type' => 'title', 'label' => __( 'IP Restriction Settings', WPC_CLIENT_TEXT_DOMAIN ), ), array( 'id' => 'enable_limit', 'type' => 'checkbox', 'label' => __( 'Use IP Restriction', WPC_CLIENT_TEXT_DOMAIN ), 'value' => ( isset( $wpc_limit_ips['enable_limit'] ) ) ? $wpc_limit_ips['enable_limit'] : 'no', 'description' => __( 'Enable IP Restriction', WPC_CLIENT_TEXT_DOMAIN ), ), array( 'id' => 'ips', 'type' => 'textarea', 'label' => __( 'Allowed IP Addresses', WPC_CLIENT_TEXT_DOMAIN ), 'value' => ( isset( $wpc_limit_ips['ips'] ) ) ? $wpc_limit_ips['ips'] : '', 'description' => __( 'Enter IP address here (one per line)', WPC_CLIENT_TEXT_DOMAIN ), 'conditional' => array( 'enable_limit', '=', 'yes' ), ), ); $this->settings()->render_settings_section( $section_fields );